<div class="container-fluid p-0 settings-page">
  <div
    class="d-flex justify-content-between align-items-center p-3 pt-2 pb-1 bg-body-secondary"
  >
    <h2><i class="bi bi-activity pe-3 icon-sm"></i>Settings</h2>
  </div>
  <hr class="m-0" />
  <div class="p-3 details">
    <div class="mb-3 server form-line">
      <label for="server-url" class="form-label field-label">Server</label>
      <div class="flex-fill control-column">
        <input
          type="text"
          class="form-control w-100"
          id="server-url"
          [(ngModel)]="apiUrlValue"
          (ngModelChange)="onApiUrlChange($event)"
          placeholder="API base URL"
        />
      </div>
    </div>
    <div class="settings-list">
      @for (setting of settings; track setting.settingId) {
        <div class="mb-3 form-line">
          <label
            class="form-label field-label"
            [attr.for]="settingInputId(setting)"
          >
            {{ setting.displayName }}
          </label>
          <div class="flex-fill control-column">
            @if (setting.settingType === settingType.String) {
              <input
                [id]="settingInputId(setting)"
                type="text"
                class="form-control long"
                [(ngModel)]="setting.valueString"
                (blur)="onStringBlur(setting)"
              />
            }

            @if (setting.settingType === settingType.Boolean) {
              <div class="form-check mb-0">
                <input
                  [id]="settingInputId(setting)"
                  class="form-check-input long"
                  type="checkbox"
                  [ngModel]="setting.valueBoolean ?? false"
                  (ngModelChange)="onBooleanChange(setting, $event)"
                />
              </div>
            }

            @if (setting.settingType === settingType.Integer) {
              <input
                [id]="settingInputId(setting)"
                type="number"
                class="form-control tiny"
                step="1"
                [(ngModel)]="setting.valueInteger"
                (blur)="onIntegerBlur(setting)"
              />
            }

            @if (setting.settingType === settingType.Double) {
              <input
                [id]="settingInputId(setting)"
                type="number"
                class="form-control tiny"
                step="any"
                [(ngModel)]="setting.valueDouble"
                (blur)="onDoubleBlur(setting)"
              />
            }
          </div>
        </div>
      }
    </div>
  </div>
</div>
